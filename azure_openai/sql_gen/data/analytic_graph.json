{  
  "date_format": "YYYY-MM-DD",  
  "business_scenarios": [  
    {  
      "scenario": "Order Analysis",  
      "description": "Analyzing orders placed by customers to understand sales trends, order fulfillment, and customer behavior."  
    },  
    {  
      "scenario": "Customer Analysis",  
      "description": "Understanding customer demographics, purchasing patterns, and customer satisfaction."  
    },  
    {  
      "scenario": "Product Analysis",  
      "description": "Analyzing product performance, inventory levels, and supplier efficiency."  
    },  
    {  
      "scenario": "Employee Performance",  
      "description": "Evaluating employee performance, sales territories, and employee impact on sales."  
    },  
    {  
      "scenario": "Supplier Analysis",  
      "description": "Evaluating supplier performance, delivery times, and quality of supplied products."  
    },  
    {  
      "scenario": "Shipping Analysis",  
      "description": "Analyzing shipping times, costs, and shipping company performance."  
    },  
    {  
      "scenario": "Inventory Management",  
      "description": "Managing inventory levels, reorder points, and stock optimization."  
    }  
  ],  
  "business_metrics": [  
    {  
      "name": "Total Sales",  
      "description": "Total revenue generated from orders.",  
      "formula": "SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount))",  
      "tables": ["orders", "[Order Details]"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Average Order Value",  
      "description": "Average value of an order placed by customers.",  
      "formula": "SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) / COUNT(DISTINCT orders.OrderID)",  
      "tables": ["orders", "[Order Details]"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Customer Lifetime Value",  
      "description": "Total revenue generated from a customer over time.",  
      "formula": "SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) GROUP BY customers.CustomerID",  
      "tables": ["customers", "orders", "[Order Details]"],  
      "granularity": "lifetime"  
    },  
    {  
      "name": "Product Performance",  
      "description": "Performance of products based on sales and inventory levels.",  
      "formula": "SUM([Order Details].Quantity) GROUP BY products.ProductID",  
      "tables": ["products", "[Order Details]"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Employee Sales",  
      "description": "Total sales generated by each employee.",  
      "formula": "SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) GROUP BY employees.EmployeeID",  
      "tables": ["employees", "orders", "[Order Details]"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Order Fulfillment Time",  
      "description": "Average time taken to fulfill an order.",  
      "formula": "AVG(DATEDIFF(orders.ShippedDate, orders.OrderDate))",  
      "tables": ["orders"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Customer Retention Rate",  
      "description": "Percentage of returning customers over a period.",  
      "formula": "(COUNT(DISTINCT orders.CustomerID) WHERE orders.OrderDate BETWEEN 'start_date' AND 'end_date') / (COUNT(DISTINCT orders.CustomerID) WHERE orders.OrderDate < 'start_date')",  
      "tables": ["customers", "orders"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Supplier Lead Time",  
      "description": "Average time taken by suppliers to deliver products.",  
      "formula": "AVG(DATEDIFF(orders.ShippedDate, orders.OrderDate)) GROUP BY products.SupplierID",  
      "tables": ["suppliers", "products", "orders"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Inventory Turnover Ratio",  
      "description": "Ratio of cost of goods sold to average inventory.",  
      "formula": "SUM([Order Details].Quantity * [Order Details].UnitPrice) / AVG(products.UnitsInStock)",  
      "tables": ["products", "[Order Details]"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "Shipping Cost per Order",  
      "description": "Average shipping cost per order.",  
      "formula": "AVG(orders.Freight)",  
      "tables": ["orders"],  
      "granularity": "monthly"  
    },  
    {  
      "name": "On-time Delivery Rate",  
      "description": "Percentage of orders delivered on or before the required date.",  
      "formula": "COUNT(orders.OrderID WHERE orders.ShippedDate <= orders.RequiredDate) / COUNT(orders.OrderID)",  
      "tables": ["orders"],  
      "granularity": "monthly"  
    }  
  ],  
  "example_queries": [  
    {  
      "metric": "Total Sales",  
      "query": "SELECT SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) AS total_sales FROM [Order Details] JOIN orders ON [Order Details].OrderID = orders.OrderID WHERE orders.OrderDate BETWEEN '2023-01-01' AND '2023-12-31'"  
    },  
    {  
      "metric": "Average Order Value",  
      "query": "SELECT SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) / COUNT(DISTINCT orders.OrderID) AS avg_order_value FROM [Order Details] JOIN orders ON [Order Details].OrderID = orders.OrderID WHERE orders.OrderDate BETWEEN '2023-01-01' AND '2023-12-31'"  
    },  
    {  
      "metric": "Customer Lifetime Value",  
      "query": "SELECT customers.CustomerID, SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) AS customer_lifetime_value FROM [Order Details] JOIN orders ON [Order Details].OrderID = orders.OrderID JOIN customers ON orders.CustomerID = customers.CustomerID GROUP BY customers.CustomerID"  
    },  
    {  
      "metric": "Product Performance",  
      "query": "SELECT products.ProductID, SUM([Order Details].Quantity) AS product_performance FROM [Order Details] JOIN products ON [Order Details].ProductID = products.ProductID GROUP BY products.ProductID"  
    },  
    {  
      "metric": "Employee Sales",  
      "query": "SELECT employees.EmployeeID, SUM([Order Details].UnitPrice * [Order Details].Quantity * (1 - [Order Details].Discount)) AS employee_sales FROM [Order Details] JOIN orders ON [Order Details].OrderID = orders.OrderID JOIN employees ON orders.EmployeeID = employees.EmployeeID GROUP BY employees.EmployeeID"  
    },  
    {  
      "metric": "Order Fulfillment Time",  
      "query": "SELECT AVG(DATEDIFF(orders.ShippedDate, orders.OrderDate)) AS order_fulfillment_time FROM orders"  
    },  
    {  
      "metric": "Customer Retention Rate",  
      "query": "(SELECT COUNT(DISTINCT orders.CustomerID) FROM orders WHERE orders.OrderDate BETWEEN '2023-01-01' AND '2023-12-31') / (SELECT COUNT(DISTINCT orders.CustomerID) FROM orders WHERE orders.OrderDate < '2023-01-01') AS customer_retention_rate"  
    },  
    {  
      "metric": "Supplier Lead Time",  
      "query": "SELECT products.SupplierID, AVG(DATEDIFF(orders.ShippedDate, orders.OrderDate)) AS supplier_lead_time FROM orders JOIN products ON orders.OrderID = products.ProductID GROUP BY products.SupplierID"  
    },  
    {  
      "metric": "Inventory Turnover Ratio",  
      "query": "SELECT SUM([Order Details].Quantity * [Order Details].UnitPrice) / AVG(products.UnitsInStock) AS inventory_turnover_ratio FROM [Order Details] JOIN products ON [Order Details].ProductID = products.ProductID"  
    },  
    {  
      "metric": "Shipping Cost per Order",  
      "query": "SELECT AVG(orders.Freight) AS shipping_cost_per_order FROM orders"  
    },  
    {  
      "metric": "On-time Delivery Rate",  
      "query": "SELECT COUNT(orders.OrderID WHERE orders.ShippedDate <= orders.RequiredDate) / COUNT(orders.OrderID) AS on_time_delivery_rate FROM orders"  
    }  
  ],  
  "scenario_metric_mapping": [  
    {  
      "scenario": "Order Analysis",  
      "metrics": [  
        "Total Sales",  
        "Average Order Value",  
        "Order Fulfillment Time",  
        "On-time Delivery Rate"  
      ]  
    },  
    {  
      "scenario": "Customer Analysis",  
      "metrics": [  
        "Customer Lifetime Value",  
        "Customer Retention Rate"  
      ]  
    },  
    {  
      "scenario": "Product Analysis",  
      "metrics": [  
        "Product Performance",  
        "Inventory Turnover Ratio"  
      ]  
    },  
    {  
      "scenario": "Employee Performance",  
      "metrics": [  
        "Employee Sales"  
      ]  
    },  
    {  
      "scenario": "Supplier Analysis",  
      "metrics": [  
        "Supplier Lead Time",  
        "Total Sales"  
      ]  
    },  
    {  
      "scenario": "Shipping Analysis",  
      "metrics": [  
        "Shipping Cost per Order",  
        "On-time Delivery Rate",  
        "Order Fulfillment Time"  
      ]  
    },  
    {  
      "scenario": "Inventory Management",  
      "metrics": [  
        "Inventory Turnover Ratio",  
        "Product Performance"  
      ]  
    }  
  ],  
  "tables": {  
    "orders": {  
      "columns": {  
        "OrderID": {  
          "type": "INT",  
          "description": "Primary key for orders table."  
        },  
        "CustomerID": {  
          "type": "VARCHAR",  
          "description": "Foreign key to customers table."  
        },  
        "EmployeeID": {  
          "type": "INT",  
          "description": "Foreign key to employees table."  
        },  
        "OrderDate": {  
          "type": "DATE",  
          "description": "Date when the order was placed."  
        },  
        "RequiredDate": {  
          "type": "DATE",  
          "description": "Date by which the order is required."  
        },  
        "ShippedDate": {  
          "type": "DATE",  
          "description": "Date when the order was shipped."  
        },  
        "ShipVia": {  
          "type": "INT",  
          "description": "Shipping method."  
        },  
        "Freight": {  
          "type": "DECIMAL",  
          "description": "Freight cost."  
        },  
        "ShipName": {  
          "type": "VARCHAR",  
          "description": "Name of the shipping recipient."  
        },  
        "ShipAddress": {  
          "type": "VARCHAR",  
          "description": "Address of the shipping recipient."  
        },  
        "ShipCity": {  
          "type": "VARCHAR",  
          "description": "City of the shipping recipient."  
        },  
        "ShipRegion": {  
          "type": "VARCHAR",  
          "description": "Region of the shipping recipient."  
        },  
        "ShipPostalCode": {  
          "type": "VARCHAR",  
          "description": "Postal code of the shipping recipient."  
        },  
        "ShipCountry": {  
          "type": "VARCHAR",  
          "description": "Country of the shipping recipient."  
        }  
      }  
    },  
    "customers": {  
      "columns": {  
        "CustomerID": {  
          "type": "VARCHAR",  
          "description": "Primary key for customers table."  
        },  
        "CompanyName": {  
          "type": "VARCHAR",  
          "description": "Name of the company."  
        },  
        "ContactName": {  
          "type": "VARCHAR",  
          "description": "Name of the contact person."  
        },  
        "ContactTitle": {  
          "type": "VARCHAR",  
          "description": "Title of the contact person."  
        },  
        "Address": {  
          "type": "VARCHAR",  
          "description": "Address of the customer."  
        },  
        "City": {  
          "type": "VARCHAR",  
          "description": "City of the customer."  
        },  
        "Region": {  
          "type": "VARCHAR",  
          "description": "Region of the customer."  
        },  
        "PostalCode": {  
          "type": "VARCHAR",  
          "description": "Postal code of the customer."  
        },  
        "Country": {  
          "type": "VARCHAR",  
          "description": "Country of the customer."  
        },  
        "Phone": {  
          "type": "VARCHAR",  
          "description": "Phone number of the customer."  
        },  
        "Fax": {  
          "type": "VARCHAR",  
          "description": "Fax number of the customer."  
        }  
      }  
    },  
    "[Order Details]": {  
      "columns": {  
        "OrderID": {  
          "type": "INT",  
          "description": "Foreign key to orders table."  
        },  
        "ProductID": {  
          "type": "INT",  
          "description": "Foreign key to products table."  
        },  
        "UnitPrice": {  
          "type": "DECIMAL",  
          "description": "Price per unit of the product."  
        },  
        "Quantity": {  
          "type": "SMALLINT",  
          "description": "Quantity of the product ordered."  
        },  
        "Discount": {  
          "type": "DOUBLE",  
          "description": "Discount applied to the product."  
        }  
      }  
    },  
    "products": {  
      "columns": {  
        "ProductID": {  
          "type": "INT",  
          "description": "Primary key for products table."  
        },  
        "ProductName": {  
          "type": "VARCHAR",  
          "description": "Name of the product."  
        },  
        "SupplierID": {  
          "type": "INT",  
          "description": "Foreign key to suppliers table."  
        },  
        "CategoryID": {  
          "type": "INT",  
          "description": "Foreign key to categories table."  
        },  
        "QuantityPerUnit": {  
          "type": "VARCHAR",  
          "description": "Quantity per unit of the product."  
        },  
        "UnitPrice": {  
          "type": "DECIMAL",  
          "description": "Price per unit of the product."  
        },  
        "UnitsInStock": {  
          "type": "SMALLINT",  
          "description": "Units of the product in stock."  
        },  
        "UnitsOnOrder": {  
          "type": "SMALLINT",  
          "description": "Units of the product on order."  
        },  
        "ReorderLevel": {  
          "type": "SMALLINT",  
          "description": "Reorder level for the product."  
        },  
        "Discontinued": {  
          "type": "BIT",  
          "description": "Whether the product is discontinued."  
        }  
      }  
    },  
    "employees": {  
      "columns": {  
        "EmployeeID": {  
          "type": "INT",  
          "description": "Primary key for employees table."  
        },  
        "LastName": {  
          "type": "VARCHAR",  
          "description": "Last name of the employee."  
        },  
        "FirstName": {  
          "type": "VARCHAR",  
          "description": "First name of the employee."  
        },  
        "Title": {  
          "type": "VARCHAR",  
          "description": "Title of the employee."  
        },  
        "TitleOfCourtesy": {  
          "type": "VARCHAR",  
          "description": "Courtesy title of the employee."  
        },  
        "BirthDate": {  
          "type": "DATE",  
          "description": "Birth date of the employee."  
        },  
        "HireDate": {  
          "type": "DATE",  
          "description": "Hire date of the employee."  
        },  
        "Address": {  
          "type": "VARCHAR",  
          "description": "Address of the employee."  
        },  
        "City": {  
          "type": "VARCHAR",  
          "description": "City of the employee."  
        },  
        "Region": {  
          "type": "VARCHAR",  
          "description": "Region of the employee."  
        },  
        "PostalCode": {  
          "type": "VARCHAR",  
          "description": "Postal code of the employee."  
        },  
        "Country": {  
          "type": "VARCHAR",  
          "description": "Country of the employee."  
        },  
        "HomePhone": {  
          "type": "VARCHAR",  
          "description": "Home phone of the employee."  
        },  
        "Extension": {  
          "type": "VARCHAR",  
          "description": "Extension number of the employee."  
        },  
        "Photo": {  
          "type": "LONGBLOB",  
          "description": "Photo of the employee."  
        },  
        "Notes": {  
          "type": "MEDIUMTEXT",  
          "description": "Notes about the employee."  
        },  
        "ReportsTo": {  
          "type": "INT",  
          "description": "Employee ID of the manager."  
        },  
        "PhotoPath": {  
          "type": "VARCHAR",  
          "description": "Path to the photo of the employee."  
        },  
        "Salary": {  
          "type": "FLOAT",  
          "description": "Salary of the employee."  
        }  
      }  
    },  
    "shippers": {  
      "columns": {  
        "ShipperID": {  
          "type": "INT",  
          "description": "Primary key for shippers table."  
        },  
        "CompanyName": {  
          "type": "VARCHAR",  
          "description": "Name of the shipping company."  
        },  
        "Phone": {  
          "type": "VARCHAR",  
          "description": "Phone number of the shipping company."  
        }  
      }  
    },  
    "suppliers": {  
      "columns": {  
        "SupplierID": {  
          "type": "INT",  
          "description": "Primary key for suppliers table."  
        },  
        "CompanyName": {  
          "type": "VARCHAR",  
          "description": "Name of the supplier company."  
        },  
        "ContactName": {  
          "type": "VARCHAR",  
          "description": "Name of the contact person."  
        },  
        "ContactTitle": {  
          "type": "VARCHAR",  
          "description": "Title of the contact person."  
        },  
        "Address": {  
          "type": "VARCHAR",  
          "description": "Address of the supplier."  
        },  
        "City": {  
          "type": "VARCHAR",  
          "description": "City of the supplier."  
        },  
        "Region": {  
          "type": "VARCHAR",  
          "description": "Region of the supplier."  
        },  
        "PostalCode": {  
          "type": "VARCHAR",  
          "description": "Postal code of the supplier."  
        },  
        "Country": {  
          "type": "VARCHAR",  
          "description": "Country of the supplier."  
        },  
        "Phone": {  
          "type": "VARCHAR",  
          "description": "Phone number of the supplier."  
        },  
        "Fax": {  
          "type": "VARCHAR",  
          "description": "Fax number of the supplier."  
        },  
        "HomePage": {  
          "type": "MEDIUMTEXT",  
          "description": "Homepage of the supplier."  
        }  
      }  
    },  
    "categories": {  
      "columns": {  
        "CategoryID": {  
          "type": "INT",  
          "description": "Primary key for categories table."  
        },  
        "CategoryName": {  
          "type": "VARCHAR",  
          "description": "Name of the category."  
        },  
        "Description": {  
          "type": "MEDIUMTEXT",  
          "description": "Description of the category."  
        },  
        "Picture": {  
          "type": "LONGBLOB",  
          "description": "Picture of the category."  
        }  
      }  
    },  
    "territories": {  
      "columns": {  
        "TerritoryID": {  
          "type": "VARCHAR",  
          "description": "Primary key for territories table."  
        },  
        "TerritoryDescription": {  
          "type": "VARCHAR",  
          "description": "Description of the territory."  
        },  
        "RegionID": {  
          "type": "INT",  
          "description": "Foreign key to region table."  
        }  
      }  
    },  
    "employeeTerritories": {  
      "columns": {  
        "EmployeeID": {  
          "type": "INT",  
          "description": "Foreign key to employees table."  
        },  
        "TerritoryID": {  
          "type": "VARCHAR",  
          "description": "Foreign key to territories table."  
        }  
      }  
    },  
    "region": {  
      "columns": {  
        "RegionID": {  
          "type": "INT",  
          "description": "Primary key for region table."  
        },  
        "RegionDescription": {  
          "type": "VARCHAR",  
          "description": "Description of the region."  
        }  
      }  
    },  
    "customerDemographics": {  
      "columns": {  
        "CustomerTypeID": {  
          "type": "VARCHAR",  
          "description": "Primary key for customer demographics table."  
        },  
        "CustomerDesc": {  
          "type": "MEDIUMTEXT",  
          "description": "Description of the customer type."  
        }  
      }  
    },  
    "customerCustomerDemo": {  
      "columns": {  
        "CustomerID": {  
          "type": "VARCHAR",  
          "description": "Foreign key to customers table."  
        },  
        "CustomerTypeID": {  
          "type": "VARCHAR",  
          "description": "Foreign key to customer demographics table."  
        }  
      }  
    }  
  }  
}  
